@(message: String)

@main("Put your voice") {

  <div id="container">
    <div id="content">
      <h1>hello</h1>
      <audio class="audio">your browser can't use audio tag</audio>
      <a class="link"></a>
      <button id="recorder" class="recorder">Put your voice</button>
      <button id="player" class="player">Play</button>
    </div>
  </div>
  <script src='@routes.Assets.at("javascripts/audio-helper.js")' type="text/javascript"></script>
  <script type="text/javascript">
    /*
     * 
     */
    var onClickRecord = function(e) {
      window.audioBufferArray = [];

      navigator.getUserMedia(
        { video: false, audio: true },
        function(stream) {
          var mediaStreamSource = window.audioContext.createMediaStreamSource(stream);
          var scriptProcessor = window.audioContext.createScriptProcessor(BUFFERSIZE, 1, 1);

          mediaStreamSource.connect(scriptProcessor);
          scriptProcessor.connect(window.audioContext.destination);

          // record
          scriptProcessor.onaudioprocess = window.onAudioProcess;

          // stop after setting millisec
          setTimeout(function() {
            stream.stop();

          }, RECORDABLE_MILLISECOND);
        },
        function (error) {
          console.log(error.name ? error.name : error);
        }
      );
    };

    /*
     * 
     */
    var onClickPlayer = function(e) {
      var src = window.audioContext.createBufferSource();
      src.buffer = getAudioBuffer(window.audioBufferArray, BUFFERSIZE);
      src.connect(audioContext.destination);
      src.start();
    };

    $('#recorder').on('click', onClickRecord);
    $('#player').on('click', onClickPlayer);
  </script>
}
